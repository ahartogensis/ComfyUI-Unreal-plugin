{"id":"8d701b7e-d566-428d-8a35-8cf761e7e375","revision":0,"last_node_id":329,"last_link_id":575,"nodes":[{"id":298,"type":"WebcamCapture","pos":[-1400,1250],"size":[270,392],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"WEBCAM","widget":{"name":"image"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"capture_on_queue","name":"capture_on_queue","type":"BOOLEAN","widget":{"name":"capture_on_queue"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[575]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"WebcamCapture","ue_properties":{"widget_ue_connectable":{"image":true,"width":true,"height":true,"capture_on_queue":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["",640,480,true,"capture"]},{"id":208,"type":"ImageResizeKJv2","pos":[-1070,1250],"size":[270,336],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":575},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[329,330]},{"localized_name":"width","name":"width","type":"INT","links":[521]},{"localized_name":"height","name":"height","type":"INT","links":[520]},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"9ea455afd61cc3814bbf8deb5e7e387336872466","Node name for S&R":"ImageResizeKJv2","ue_properties":{"widget_ue_connectable":{"width":true,"height":true,"upscale_method":true,"keep_proportion":true,"pad_color":true,"crop_position":true,"divisible_by":true,"device":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[512,512,"nearest-exact","resize","0, 0, 0","center",2,"cpu","<tr><td>Output: </td><td><b>1</b> x <b>512</b> x <b>384 | 2.25MB</b></td></tr>"]},{"id":172,"type":"EmptyImage","pos":[-690,1690],"size":[270,130],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":521},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":520},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"INT","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[274]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptyImage","ue_properties":{"widget_ue_connectable":{"width":true,"height":true,"batch_size":true,"color":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[512,512,1,0]},{"id":36,"type":"PreviewImage","pos":[-745.07080078125,865.1356201171875],"size":[434.3008117675781,268.2913513183594],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":31}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":34,"type":"DownloadAndLoadFlorence2Model","pos":[-1120.0015869140625,1031.88916015625],"size":[318.6021423339844,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[29]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.6","Node name for S&R":"DownloadAndLoadFlorence2Model","ue_properties":{"widget_ue_connectable":{"model":true,"precision":true,"attention":true,"convert_to_safetensors":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["microsoft/Florence-2-base","fp16","sdpa",false]},{"id":301,"type":"LoadImage","pos":[-1413.866943359375,879.8059692382812],"size":[274.080078125,314.00006103515625],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"LoadImage","ue_properties":{"widget_ue_connectable":{"image":true,"upload":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["people_test_3 (1).jpg","image"]},{"id":166,"type":"PreviewImage","pos":[1880,1260],"size":[252.12887573242188,246],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":348}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":158,"type":"easy forLoopEnd","pos":[1650,1250],"size":[163.08984375,146],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","link":404},{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":342},{"name":"initial_value2","type":"*","link":343},{"name":"initial_value3","type":"*","link":518},{"name":"initial_value4","type":"*","link":null}],"outputs":[{"localized_name":"value1","name":"value1","type":"*","links":[]},{"name":"value2","type":"*","links":[348]},{"name":"value3","type":"*","links":[]},{"name":"value4","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy forLoopEnd","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":170,"type":"ImageBatch","pos":[1458.5067138671875,1390.34912109375],"size":[140,46],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":276},{"localized_name":"image2","name":"image2","type":"IMAGE","link":528}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[343]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageBatch","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":157,"type":"easy forLoopStart","pos":[-76.67428588867188,1244.329833984375],"size":[270,178],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":330},{"localized_name":"total","name":"total","type":"INT","widget":{"name":"total"},"link":574},{"name":"initial_value2","type":"*","link":274},{"name":"initial_value3","type":"*","link":516},{"name":"initial_value4","type":"*","link":null}],"outputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","links":[404]},{"localized_name":"index","name":"index","type":"INT","links":[272]},{"localized_name":"value1","name":"value1","type":"*","links":[275]},{"name":"value2","type":"*","links":[276]},{"name":"value3","type":"*","links":[517,518]},{"name":"value4","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy forLoopStart","ue_properties":{"widget_ue_connectable":{"total":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[1],"color":"#223","bgcolor":"#335"},{"id":326,"type":"easy convertAnything","pos":[-62.107200622558594,1137.041259765625],"size":[270,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"*","name":"*","type":"*","link":560},{"localized_name":"output_type","name":"output_type","type":"COMBO","widget":{"name":"output_type"},"link":null}],"outputs":[{"label":"string","localized_name":"*","name":"string","type":"STRING","links":[569]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy convertAnything","ue_properties":{"widget_ue_connectable":{"output_type":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["string"]},{"id":328,"type":"CR Text","pos":[257.8927001953125,1117.041259765625],"size":[400,200],"flags":{"collapsed":true},"order":3,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"*","links":[573]},{"localized_name":"show_help","name":"show_help","type":"STRING","links":[]}],"properties":{"cnr_id":"ComfyUI_Comfyroll_CustomNodes","ver":"d78b780ae43fcf8c6b7c6505e6ffb4584281ceca","Node name for S&R":"CR Text","ue_properties":{"widget_ue_connectable":{"text":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["# Handle wrapped ComfyUI data types safely\ndata = text1\n\n# Convert StringWrapper → real Python string\nif not isinstance(data, (list, dict)):\n    try:\n        data_str = str(data)\n    except Exception as e:\n        print(\"⚠️ Could not convert input to string:\", e)\n        data_str = \"\"\nelse:\n    data_str = data\n\n# Try to evaluate stringified Python structure if needed\nif isinstance(data_str, str):\n    try:\n        parsed = eval(data_str)\n    except Exception as e:\n        print(\"⚠️ Eval failed:\", e)\n        parsed = []\nelse:\n    parsed = data_str\n\n# Collect labels\nlabels = []\nif isinstance(parsed, list):\n    for item in parsed:\n        if isinstance(item, dict):\n            labels.extend(item.get(\"labels\", []))\nelif isinstance(parsed, dict):\n    labels.extend(parsed.get(\"labels\", []))\nelse:\n    print(\"⚠️ Unexpected parsed type:\", type(parsed))\n\nnum = len(labels)\nprint(f\"✅ Found {num} labels -> {labels}\")\nnumber1.to(int(num))\n\n"]},{"id":318,"type":"Exec Python Code Script","pos":[255.94149780273438,1166.7930908203125],"size":[444.23248291015625,529.9999389648438],"flags":{"collapsed":true},"order":12,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":null},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":null},{"localized_name":"mask1","name":"mask1","shape":7,"type":"MASK","link":null},{"localized_name":"mask2","name":"mask2","shape":7,"type":"MASK","link":null},{"localized_name":"list1","name":"list1","shape":7,"type":"*","link":null},{"localized_name":"dict1","name":"dict1","shape":7,"type":"*","link":null},{"localized_name":"any1","name":"any1","shape":7,"type":"*","link":null},{"localized_name":"any2","name":"any2","shape":7,"type":"*","link":null},{"localized_name":"any3","name":"any3","shape":7,"type":"*","link":null},{"localized_name":"any4","name":"any4","shape":7,"type":"*","link":null},{"localized_name":"raw_code","name":"raw_code","type":"STRING","widget":{"name":"raw_code"},"link":573},{"localized_name":"number1","name":"number1","shape":7,"type":"FLOAT","widget":{"name":"number1"},"link":null},{"localized_name":"number2","name":"number2","shape":7,"type":"INT","widget":{"name":"number2"},"link":null},{"localized_name":"text1","name":"text1","shape":7,"type":"STRING","widget":{"name":"text1"},"link":569},{"localized_name":"text2","name":"text2","shape":7,"type":"STRING","widget":{"name":"text2"},"link":null},{"localized_name":"verbose","name":"verbose","shape":7,"type":"BOOLEAN","widget":{"name":"verbose"},"link":null}],"outputs":[{"localized_name":"image1","name":"image1","type":"*","links":null},{"localized_name":"image2","name":"image2","type":"*","links":null},{"localized_name":"mask1","name":"mask1","type":"*","links":null},{"localized_name":"mask2","name":"mask2","type":"*","links":null},{"localized_name":"number1","name":"number1","type":"*","links":[574]},{"localized_name":"number2","name":"number2","type":"*","links":null},{"localized_name":"text1","name":"text1","type":"*","links":[]},{"localized_name":"text2","name":"text2","type":"*","links":[]},{"localized_name":"list1","name":"list1","type":"*","links":null},{"localized_name":"dict1","name":"dict1","type":"*","links":null},{"localized_name":"any1","name":"any1","type":"*","links":null},{"localized_name":"any2","name":"any2","type":"*","links":null},{"localized_name":"any3","name":"any3","type":"*","links":null},{"localized_name":"any4","name":"any4","type":"*","links":null}],"properties":{"cnr_id":"python-interpreter-node","ver":"1.2.3","ue_properties":{"widget_ue_connectable":{"raw_code":true,"number1":true,"number2":true,"text1":true,"text2":true,"verbose":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["",1,0,"hello","world",false,"\"\"\"Docs: https://github.com/christian-byrne/python-interpreter-node\"\"\"\n\n# Use .to() to re-assign the value of input/output variables\nlist1.to([1, 2, 3]) # Instead of list1 = [1, 2, 3]\nnumber1.to(3.14) # Instead of number1 = 3.14\n\n# If passing inputs/outputs as args to non-builtins, use .data\nfrom torchvision.transforms import ToPILImage\nimage1.to(image1.squeeze(0).permute(2, 0, 1)) # From BHWC to CHW\nimage1_pil = ToPILImage()(image1.data) # Use .data when passing as arg\nimage1.to(image1.permute(1, 2, 0).unsqueeze(0)) # Back to BHWC\n\n# In all other cases, code behaves like normal python code\n# Any variables you define yourself will behave as expected\nprint(image1, image2, mask1, mask2, number1, number2, sep='\\n')\nprint(text1, text2, dict1, list1, any1, any2, any3, sep='\\n')\n\n","Output:\n✅ Found 1 labels -> ['humans']\n"]},{"id":48,"type":"DownloadAndLoadSAM2Model","pos":[-73.9547348022461,1726.4130859375],"size":[270,130],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"segmentor","name":"segmentor","type":"COMBO","widget":{"name":"segmentor"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[45]}],"properties":{"cnr_id":"ComfyUI-segment-anything-2","ver":"ebdb9869596b14babdaa83505e6863aad4618501","Node name for S&R":"DownloadAndLoadSAM2Model","ue_properties":{"widget_ue_connectable":{"model":true,"segmentor":true,"device":true,"precision":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["sam2.1_hiera_large.safetensors","single_image","cuda","fp16"]},{"id":46,"type":"Florence2toCoordinates","pos":[229.94442749023438,1668.764892578125],"size":[270,102],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"data","name":"data","type":"JSON","link":517},{"localized_name":"index","name":"index","type":"STRING","widget":{"name":"index"},"link":199},{"localized_name":"batch","name":"batch","type":"BOOLEAN","widget":{"name":"batch"},"link":null}],"outputs":[{"localized_name":"center_coordinates","name":"center_coordinates","type":"STRING","links":[]},{"localized_name":"bboxes","name":"bboxes","type":"BBOX","links":[52]}],"properties":{"cnr_id":"ComfyUI-segment-anything-2","ver":"ebdb9869596b14babdaa83505e6863aad4618501","Node name for S&R":"Florence2toCoordinates","ue_properties":{"widget_ue_connectable":{"index":true,"batch":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["1",false]},{"id":47,"type":"Sam2Segmentation","pos":[221.2914581298828,1825.21044921875],"size":[272.087890625,182],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":45},{"localized_name":"image","name":"image","type":"IMAGE","link":128},{"localized_name":"coordinates_positive","name":"coordinates_positive","shape":7,"type":"STRING","link":null},{"localized_name":"coordinates_negative","name":"coordinates_negative","shape":7,"type":"STRING","link":null},{"localized_name":"bboxes","name":"bboxes","shape":7,"type":"BBOX","link":52},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"individual_objects","name":"individual_objects","shape":7,"type":"BOOLEAN","widget":{"name":"individual_objects"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[142,144,391,513]}],"properties":{"cnr_id":"ComfyUI-segment-anything-2","ver":"ebdb9869596b14babdaa83505e6863aad4618501","Node name for S&R":"Sam2Segmentation","ue_properties":{"widget_ue_connectable":{"keep_model_loaded":true,"individual_objects":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true,true]},{"id":65,"type":"Int2String","pos":[234.734619140625,1491.8792724609375],"size":[140,26],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"Int","name":"Int","type":"INT","link":272}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[199]}],"properties":{"cnr_id":"ComfyUI-Chibi-Nodes","ver":"424d5fc68bd3b82fe3c491f27b0c37bb3de1d123","Node name for S&R":"Int2String","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":303,"type":"MaskPreview+","pos":[528.135009765625,1695.143310546875],"size":[150.14315795898438,246],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":513}],"outputs":[],"properties":{"cnr_id":"comfyui_essentials","ver":"cb5c69c5715230ff6cc1402ddbb5a59473e23202","Node name for S&R":"MaskPreview+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":306,"type":"PreviewImage","pos":[631.4939575195312,2176.5390625],"size":[140,246],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":525}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":93,"type":"ImageCompositeMasked","pos":[318.1739807128906,2179.665283203125],"size":[270,146],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":151},{"localized_name":"source","name":"source","type":"IMAGE","link":141},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":142},{"localized_name":"x","name":"x","type":"INT","widget":{"name":"x"},"link":null},{"localized_name":"y","name":"y","type":"INT","widget":{"name":"y"},"link":null},{"localized_name":"resize_source","name":"resize_source","type":"BOOLEAN","widget":{"name":"resize_source"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[393,525]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageCompositeMasked","ue_properties":{"widget_ue_connectable":{"x":true,"y":true,"resize_source":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0,0,false]},{"id":85,"type":"DownloadAndLoadDepthAnythingV2Model","pos":[51.32563018798828,2400.379150390625],"size":[365.3121032714844,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null}],"outputs":[{"localized_name":"da_v2_model","name":"da_v2_model","type":"DAMODEL","links":[136]}],"properties":{"cnr_id":"comfyui-depthanythingv2","ver":"047a4ecfd09a951944154c7f3e823566e586c2d5","Node name for S&R":"DownloadAndLoadDepthAnythingV2Model","ue_properties":{"widget_ue_connectable":{"model":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["depth_anything_v2_vits_fp16.safetensors"]},{"id":84,"type":"DepthAnything_V2","pos":[102.81230926513672,2298.90234375],"size":[156.64413452148438,46],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"da_model","name":"da_model","type":"DAMODEL","link":136},{"localized_name":"images","name":"images","type":"IMAGE","link":212}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[141]}],"properties":{"cnr_id":"comfyui-depthanythingv2","ver":"047a4ecfd09a951944154c7f3e823566e586c2d5","Node name for S&R":"DepthAnything_V2","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":305,"type":"GetImageSize+","pos":[84.88836669921875,2174.941650390625],"size":[159.50155639648438,66],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":522}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[523]},{"localized_name":"height","name":"height","type":"INT","links":[524]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"cb5c69c5715230ff6cc1402ddbb5a59473e23202","Node name for S&R":"GetImageSize+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":82,"type":"Reroute","pos":[-83.20304107666016,2216.1748046875],"size":[75,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":275}],"outputs":[{"name":"","type":"*","links":[128,205,212,342,522]}],"properties":{"showOutputText":false,"horizontal":false,"ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}}},{"id":137,"type":"VrchWebSocketServerNode","pos":[2241.15625,1666.402099609375],"size":[279.5826110839844,214],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"server","name":"server","type":"COMBO","widget":{"name":"server"},"link":null},{"localized_name":"port","name":"port","type":"INT","widget":{"name":"port"},"link":null},{"localized_name":"debug","name":"debug","type":"BOOLEAN","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"SERVER","name":"SERVER","type":"STRING","links":[384]}],"properties":{"cnr_id":"comfyui-web-viewer","ver":"1.1.7","Node name for S&R":"VrchWebSocketServerNode","ue_properties":{"widget_ue_connectable":{"server":true,"port":true,"debug":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["0.0.0.0",8001,false,"",""]},{"id":233,"type":"VrchImageWebSocketWebViewerNode","pos":[2219.94873046875,1956.8258056640625],"size":[399.6316223144531,584],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":407},{"localized_name":"channel","name":"channel","type":"COMBO","widget":{"name":"channel"},"link":null},{"localized_name":"server","name":"server","type":"STRING","widget":{"name":"server"},"link":384},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"number_of_images","name":"number_of_images","type":"INT","widget":{"name":"number_of_images"},"link":null},{"localized_name":"image_display_duration","name":"image_display_duration","type":"INT","widget":{"name":"image_display_duration"},"link":null},{"localized_name":"fade_anim_duration","name":"fade_anim_duration","type":"INT","widget":{"name":"fade_anim_duration"},"link":null},{"localized_name":"blend_mode","name":"blend_mode","type":"COMBO","widget":{"name":"blend_mode"},"link":null},{"localized_name":"loop_playback","name":"loop_playback","type":"BOOLEAN","widget":{"name":"loop_playback"},"link":null},{"localized_name":"update_on_end","name":"update_on_end","type":"BOOLEAN","widget":{"name":"update_on_end"},"link":null},{"localized_name":"background_colour_hex","name":"background_colour_hex","type":"STRING","widget":{"name":"background_colour_hex"},"link":null},{"localized_name":"server_messages","name":"server_messages","type":"STRING","widget":{"name":"server_messages"},"link":null},{"localized_name":"save_settings","name":"save_settings","type":"BOOLEAN","widget":{"name":"save_settings"},"link":null},{"localized_name":"window_width","name":"window_width","type":"INT","widget":{"name":"window_width"},"link":null},{"localized_name":"window_height","name":"window_height","type":"INT","widget":{"name":"window_height"},"link":null},{"localized_name":"show_url","name":"show_url","type":"BOOLEAN","widget":{"name":"show_url"},"link":null},{"localized_name":"dev_mode","name":"dev_mode","type":"BOOLEAN","widget":{"name":"dev_mode"},"link":null},{"localized_name":"debug","name":"debug","type":"BOOLEAN","widget":{"name":"debug"},"link":null},{"localized_name":"extra_params","name":"extra_params","type":"STRING","widget":{"name":"extra_params"},"link":null},{"localized_name":"url","name":"url","type":"STRING","widget":{"name":"url"},"link":null}],"outputs":[{"localized_name":"IMAGES","name":"IMAGES","type":"IMAGE","links":[]},{"localized_name":"URL","name":"URL","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-web-viewer","ver":"1.1.7","Node name for S&R":"VrchImageWebSocketWebViewerNode","ue_properties":{"widget_ue_connectable":{"channel":true,"server":true,"format":true,"number_of_images":true,"image_display_duration":true,"fade_anim_duration":true,"blend_mode":true,"loop_playback":true,"update_on_end":true,"background_colour_hex":true,"server_messages":true,"save_settings":true,"window_width":true,"window_height":true,"show_url":true,"dev_mode":true,"debug":true,"extra_params":true,"url":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["1","172.18.0.2:8001","PNG",3,2000,500,"none",true,false,"#222222","",false,512,512,false,false,false,"","http://vrch.ai/viewer?mode=image-websocket&server=172.18.0.2:8001&ssl=false&protocol=websocket&path=web_viewer&channel=1&numberOfImages=3&imageDisplayDuration=2000&fadeAnimDuration=500&mixBlendMode=none&enableLoop=true&enableUpdateOnEnd=false&bgColourPicker=#222222",""]},{"id":241,"type":"PreviewImage","pos":[1878.5499267578125,1754.5531005859375],"size":[140,246],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":398}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":239,"type":"ImageBatch","pos":[1683.860107421875,1740.4554443359375],"size":[140,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":394},{"localized_name":"image2","name":"image2","type":"IMAGE","link":395}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[398,407,528]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageBatch","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":237,"type":"ImageBatch","pos":[1495.73876953125,1749.01513671875],"size":[140,46],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":392},{"localized_name":"image2","name":"image2","type":"IMAGE","link":393}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[394]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageBatch","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":238,"type":"MaskToImage","pos":[1473.443359375,1914.7861328125],"size":[184.62362670898438,26],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":391}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[395]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"MaskToImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":101,"type":"EmptyImage","pos":[840.6162719726562,2191.072265625],"size":[270,130],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":523},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":524},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"INT","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[148,151]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptyImage","ue_properties":{"widget_ue_connectable":{"width":true,"height":true,"batch_size":true,"color":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[2245,1207,1,0]},{"id":95,"type":"ImageCompositeMasked","pos":[840.96826171875,2364.692626953125],"size":[270,146],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":148},{"localized_name":"source","name":"source","type":"IMAGE","link":205},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":144},{"localized_name":"x","name":"x","type":"INT","widget":{"name":"x"},"link":null},{"localized_name":"y","name":"y","type":"INT","widget":{"name":"y"},"link":null},{"localized_name":"resize_source","name":"resize_source","type":"BOOLEAN","widget":{"name":"resize_source"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[392,526]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageCompositeMasked","ue_properties":{"widget_ue_connectable":{"x":true,"y":true,"resize_source":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0,0,false]},{"id":307,"type":"PreviewImage","pos":[1163.8016357421875,2223.58154296875],"size":[140,246],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":526}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":35,"type":"Florence2Run","pos":[-741.0230712890625,1249.2078857421875],"size":[400,364],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":329},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":29},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[31]},{"localized_name":"mask","name":"mask","type":"MASK","links":[]},{"localized_name":"caption","name":"caption","type":"STRING","links":[]},{"localized_name":"data","name":"data","type":"JSON","links":[516,560]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.6","Node name for S&R":"Florence2Run","ue_properties":{"widget_ue_connectable":{"text_input":true,"task":true,"fill_mask":true,"keep_model_loaded":true,"max_new_tokens":true,"num_beams":true,"do_sample":true,"output_mask_select":true,"seed":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["humans","caption_to_phrase_grounding",true,true,1024,3,true,"",527754099132384,"randomize"]}],"links":[[29,34,0,35,1,"FL2MODEL"],[31,35,0,36,0,"IMAGE"],[45,48,0,47,0,"SAM2MODEL"],[52,46,1,47,4,"BBOX"],[128,82,0,47,1,"IMAGE"],[136,85,0,84,0,"DAMODEL"],[141,84,0,93,1,"IMAGE"],[142,47,0,93,2,"MASK"],[144,47,0,95,2,"MASK"],[148,101,0,95,0,"IMAGE"],[151,101,0,93,0,"IMAGE"],[199,65,0,46,1,"STRING"],[205,82,0,95,1,"IMAGE"],[212,82,0,84,1,"IMAGE"],[272,157,1,65,0,"INT"],[274,172,0,157,2,"*"],[275,157,2,82,0,"*"],[276,157,3,170,0,"IMAGE"],[329,208,0,35,0,"IMAGE"],[330,208,0,157,0,"*"],[342,82,0,158,1,"*"],[343,170,0,158,2,"*"],[348,158,1,166,0,"IMAGE"],[384,137,0,233,2,"STRING"],[391,47,0,238,0,"MASK"],[392,95,0,237,0,"IMAGE"],[393,93,0,237,1,"IMAGE"],[394,237,0,239,0,"IMAGE"],[395,238,0,239,1,"IMAGE"],[398,239,0,241,0,"IMAGE"],[404,157,0,158,0,"FLOW_CONTROL"],[407,239,0,233,0,"IMAGE"],[513,47,0,303,0,"MASK"],[516,35,3,157,3,"*"],[517,157,4,46,0,"JSON"],[518,157,4,158,3,"*"],[520,208,2,172,1,"INT"],[521,208,1,172,0,"INT"],[522,82,0,305,0,"IMAGE"],[523,305,0,101,0,"INT"],[524,305,1,101,1,"INT"],[525,93,0,306,0,"IMAGE"],[526,95,0,307,0,"IMAGE"],[528,239,0,170,1,"IMAGE"],[560,35,3,326,0,"*"],[569,326,0,318,13,"STRING"],[573,328,0,318,10,"STRING"],[574,318,4,157,1,"INT"],[575,298,0,208,0,"IMAGE"]],"groups":[{"id":1,"title":"Object detection","bounding":[-1423.866943359375,791.53564453125,1123.096923828125,1038.46435546875],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"For Loop","bounding":[-86.67428588867188,1043.4412841796875,2218.89990234375,503.65887451171875],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Create Segmented Mask","bounding":[-83.95474243164062,1595.1649169921875,865.005615234375,428.2351989746094],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Create Depth","bounding":[-93.20304107666016,2101.341552734375,875.9349365234375,430.1718444824219],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Composite Mask","bounding":[827.255126953125,2107.890625,541.0169067382812,428.8935852050781],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"WebSocket","bounding":[1463.443359375,1592.8021240234375,1166.136474609375,958.0235595703125],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ue_links":[],"ds":{"scale":0.7819515626402911,"offset":[1789.101945223016,-667.2684105380537]},"links_added_by_ue":[]},"version":0.4}